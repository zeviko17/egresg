// ver 0.4
<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>שליחת הודעות ווצאפ לקבוצות</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <h1 class="text-center mb-4">שליחת הודעות ווצאפ לקבוצות</h1>
        
        <div class="card p-4">
            <!-- בחירת קבוצות -->
            <div id="groupsSection">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5>בחירת קבוצות</h5>
                    <div>
                        <button class="btn btn-primary btn-sm" onclick="messageManager.selectAll()">בחר הכל</button>
                        <button class="btn btn-secondary btn-sm" onclick="messageManager.deselectAll()">נקה</button>
                    </div>
                </div>
                <!-- Optional Search Field -->
                <!-- <input type="text" id="search" class="form-control mb-2" placeholder="חיפוש..."> -->
                <div class="neighborhood-list"></div> <!-- Target container for group list -->
            </div>

            <!-- Message Content -->
            <div class="mb-3">
                <h5>תוכן ההודעה</h5>
                <textarea id="message" class="form-control" rows="4" placeholder="הקלד את תוכן ההודעה..."></textarea>
            </div>

            <!-- File Upload -->
            <div class="mb-3">
                <h5>העלאת קבצים</h5>
                <input type="file" id="fileInput" class="form-control" multiple>
                <div id="image-preview" class="mt-2"></div>
            </div>

            <!-- Send Button -->
            <button class="btn btn-primary w-100 send-button" onclick="messageManager.startSending()" disabled>
                שלח הודעה לקבוצות שנבחרו
            </button>

            <!-- Progress Indicator -->
            <div id="progress" class="mt-3" style="display: none;">
                <div class="progress">
                    <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                </div>
                <div class="d-flex justify-content-between mt-2">
                    <span class="status-text">0/0 קבוצות</span>
                    <button class="btn btn-danger btn-sm" onclick="messageManager.stopSending()">עצור</button>
                </div>
            </div>
        </div>
    </div>

    <script src="message_manager_class.js"></script>
    
    <!-- Debugging script to confirm JavaScript loading and initialization -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            console.log("DOM fully loaded and parsed");
            console.log("MessageManager initialized:", typeof messageManager !== "undefined");
        });
    </script>
</body>
</html>
